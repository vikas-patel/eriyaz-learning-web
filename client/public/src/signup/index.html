<!DOCTYPE html>
<html>
    <head>
		<!-- Google Tag Manager -->
		<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
		j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
		'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-KLQPLM4');</script>
		<!-- End Google Tag Manager -->
        <!-- /.website title -->
        <title>eRiyaz - Sign Up</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <!-- CSS Files -->
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="fonts/icon-7-stroke/css/pe-icon-7-stroke.css" rel="stylesheet">


        <!-- Colors -->
        <link href="css/css-index-green.css" rel="stylesheet" media="screen">
        <!-- <link href="css/css-index-green.css" rel="stylesheet" media="screen"> -->
        <!-- <link href="css/css-index-purple.css" rel="stylesheet" media="screen"> -->
        <!-- <link href="css/css-index-red.css" rel="stylesheet" media="screen"> -->
        <!-- <link href="css/css-index-orange.css" rel="stylesheet" media="screen"> -->
        <!-- <link href="css/css-index-yellow.css" rel="stylesheet" media="screen"> -->
		
		<style>
			.signup-header {
				margin: 40px 0 30px;
			}
			
			.gender, .error{
				color: white;
			}
			
			#payment-confirm{
				color: white;
				display: none;
			}
			
			#message{
				font-weight: bold;
			}
			/* smart-phone ----------- */
			@media (max-width: 767px) {
				.signup-header {
					margin: 50px 0 80px;
				}
			}
			/* iPads (portrait) ----------- */
			@media only screen 
			and (min-width : 768px) 
			and (max-width : 1024px) 
			and (orientation : portrait) {
				.signup-header {
					margin: 50px 0 100px;
				}
			}
			
			/* iPads (landscape) ----------- */
			@media only screen 
			and (min-width : 768px) 
			and (max-width : 1024px) 
			and (orientation : landscape) {
				.signup-header {
					margin-top: 150px;
				}
			}
		</style>

        <!-- Google Fonts -->
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic" />

    </head>

    <body>
		<!-- Google Tag Manager (noscript) -->
		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLQPLM4"
		height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
		<!-- End Google Tag Manager (noscript) -->
        <!-- /.preloader -->
        <div id="preloader"></div>
        <div id="top"></div>

        <!-- /.parallax full screen background image -->
        <div class="fullscreen landing parallax" style="background-image:url('images/bg2.jpg');" data-img-width="2000" data-img-height="800" data-diff="100">

            <div class="overlay">
                <div class="container">

                    <div class="col-md-4 col-md-offset-4 text-center">
                        <!-- /.logo -->
						
                        <div class="logo wow fadeInDown" style="margin-top: 50px"> <a href="">eRiyaz</a><p>Learn to Sing 10x Faster</p></div>
							<h3 id="payment-confirm" class="wow fadeInUp" style="margin-bottom: 50px">
								Your payment successful.
							</h2>
							<div class="row">
									<!-- /.signup form -->
										<div class="signup-header wow fadeInUp">
											<h3 class="form-title text-center">Sign Up</h3>
											<form class="form-header" action="" role="form" id="register-form">
												<div class="form-group">
													<input class="form-control input-lg" name="name" id="name" type="text" placeholder="Your name" required>
												</div>
												<div class="form-group">
													<input class="form-control input-lg" name="email" id="email" type="email" placeholder="Email address" required>
												</div>
												<div class="form-group">
													<input class="form-control input-lg" name="password" id="password" type="password" placeholder="Your password">
												</div>
												<div class="form-group">
													<input class="form-control input-lg" name="phone" id="phone" type="text" placeholder="Mobile number">
												</div>
												<div class="form-group gender">
													<input type="radio" name="gender" value="man" required/>
													<level for="man">Man</level>
													<input type="radio" name="gender" value="woman" required />
													<level for="woman">Woman</level>
													<input type="radio" name="gender" value="child" required />
													<level for="child">Child</level>
												</div>
												<div class="form-group last">
													<input type="submit" class="btn btn-warning btn-block btn-lg" value="Sign Up">
												</div>
												<p id="message" class="message text-center"></p>
											</form>
										</div>				
								</div>
                    </div>
				</div> 
            </div> 
        </div>
		
        <!-- /.javascript files -->
        <script src="js/jquery.js"></script>
		<script src="js/jquery.validate.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/custom.js"></script>
        <script src="js/wow.min.js"></script>
        <script>
            new WOW().init();
			function getUrlVars() {
				var vars = [], hash;
				var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
				for(var i = 0; i < hashes.length; i++) {
					hash = hashes[i].split('=');
					vars.push(hash[0]);
					vars[hash[0]] = decodeURIComponent(hash[1]);
				}
				return vars;
			}
			var allVars = getUrlVars();
			var name = allVars['name'];
			var email = allVars['email'];
			var phone = allVars['phone'];
			if (name != "undefined" && typeof name != "undefined") $("input#name").val(name);
			if (email != "undefined" && typeof email != "undefined") {
				$("input#email").val(email);
				$("#payment-confirm").show();
			}
			if (phone != "undefined" && typeof phone != "undefined") $("input#phone").val(phone);
			$("input#password").val("");
			$(document).ready(function () {
			$('#register-form').validate({ // initialize the plugin
		        rules: {
		        	name: {
		                required: true
		            },
		            email: {
		                required: true,
		                email: true
		            },
					password: {
		                required: true
		            },
		            phone: {
		                required: true,
		                minlength: 10,
		                maxlength: 10
		            },
					gender: {
						required: true
					}
		        },
		        messages: {
                    name: "Please enter your name",
                    email: "Please enter a valid email address",
					password: "Please enter your password",
                    phone: "Please enter 10 digits number.",
					gender: "Please select user type."
                },
		       submitHandler: function (form) {
					var dataJson = {'name': $("input#name").val(),
                    	'email': $("input#email").val(),
						'password': $("input#password").val(),
						'gender': $('input[name=gender]:checked').val(),
                    	'mobile':$("input#phone").val()};	  
		            $.ajax({
					    type: "POST",
					    url: "/signup",
					    data: dataJson,
					    success: function(data) {
					    	if (data.status == "success") {
								$('#message').html(data.info);
								/*
					    		var params = {name:$("input#name").val(), 
												email:$("input#email").val(), 
												phone:$("input#phone").val() };
								var strParams = $.param( params );
								window.location.href = 'payment.html?' + strParams ;
								*/
					    	} else {
								$('#message').html(data.info);
					    	}
					    },
					    error: function() {
					    	$('#message').html("Something wrong: Try again.");
					   }
					  });
		            return false; // for demo
		        }
		    });
		});
        </script>
    </body>
</html>