!function(e,r){"use strict";"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?module.exports=r():e.Lyrics=r()}(this,function(){"use strict";var e=function(r){var t=e.prototype,n=0,i=void 0,a=void 0,o=function(e){return n=isNaN(e)?0:Number(e)/1e3,Number(e)},u=function(e){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0},f=[{name:"artist",id:"ar"},{name:"album",id:"al"},{name:"title",id:"ti"},{name:"author",id:"au"},{name:"length",id:"length"},{name:"by",id:"by"},{name:"offset",id:"offset",handler:o},{name:"createdBy",id:"re"},{name:"createdByVersion",id:"ve"}];t.load=function(e){i=new Array,a=new Object,n=0;for(var r=String(e).split("\n"),t=0;t<r.length;t++){var o=r[t].replace(/(^\s*)|(\s*$)/g,"");if(o){for(var s=!1,d=0;d<f.length;d++){var c=f[d].re.exec(o);if(c&&!(c.length<2)){s=!0;var m=c[1].replace(/(^\s*)|(\s*$)/g,"");"function"==typeof f[d].handler?a[String(f[d].name)]=f[d].handler.call(this,m):a[String(f[d].name)]=String(m)}}if(!s){for(var l=Array();;){var c=/^(\[\d+:\d+(.\d+)?\])(.*)/g.exec(o);if(!c)break;l.push(c[1]),o=c[c.length-1].replace(/(^\s*)|(\s*$)/g,"")}for(var d=0;d<l.length;d++){var g=/^\[(\d{1,2}):(\d|[0-5]\d)(\.(\d+))?\]$/g.exec(l[d]);g&&i.push({timestamp:60*Number(g[1])+Number(g[2])+(g[4]?Number("0."+g[4]):0),text:o})}}}}return i.sort(function(e,r){return e.timestamp>r.timestamp?1:-1}),i.length||(i=void 0),u(a)&&(a=void 0),void 0!==i||void 0!==a},t.getLyrics=function(){return i},t.getLyric=function(e){try{return i[e]}catch(e){return}},t.getIDTags=function(){return a},t.select=function(e){if(isNaN(e))return-1;var r=Number(e)+n,t=0;if(r<i[0].timestamp)return-1;for(t=0;t<i.length-1&&!(i[t].timestamp<=r&&i[t+1].timestamp>r);t++);return t};for(var s=0;s<f.length;s++)f[s].re=new RegExp("\\["+f[s].id+":(.*)\\]$","g");r&&this.load(r)};return e});